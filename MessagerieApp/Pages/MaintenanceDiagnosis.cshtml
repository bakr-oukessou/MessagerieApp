@page
@model MessagerieApp.Pages.MaintenanceDiagnosisModel
@{
    ViewData["Title"] = "Diagnostics de Maintenance";
}

<h2>Diagnostics de Maintenance</h2>

<!-- Form to create a new maintenance diagnosis -->
<form method="post">
    <div class="form-group">
        <label for="Id">ID</label>
        <input type="text" class="form-control" asp-for="MaintenanceDiagnosis.Id" />
    </div>
    <div class="form-group">
        <label for="MaintenanceTicketId">ID du Ticket de Maintenance</label>
        <input type="text" class="form-control" asp-for="MaintenanceDiagnosis.MaintenanceTicketId" />
    </div>
    <div class="form-group">
        <label for="DiagnosisDate">Date du Diagnostic</label>
        <input type="datetime-local" class="form-control" asp-for="MaintenanceDiagnosis.DiagnosisDate" />
    </div>
    <div class="form-group">
        <label for="ProblemDescription">Description du Problème</label>
        <textarea class="form-control" asp-for="MaintenanceDiagnosis.ProblemDescription"></textarea>
    </div>
    <div class="form-group">
        <label for="Frequency">Fréquence</label>
        <select class="form-control" asp-for="MaintenanceDiagnosis.Frequency">
            <option value="Rare">Rare</option>
            <option value="Frequent">Fréquent</option>
            <option value="Permanent">Permanent</option>
        </select>
    </div>
    <div class="form-group">
        <label for="IssueType">Type de Problème</label>
        <select class="form-control" asp-for="MaintenanceDiagnosis.IssueType">
            <option value="Software">Logiciel</option>
            <option value="Hardware">Matériel</option>
        </select>
    </div>
    <div class="form-group">
        <label for="RequiresReplacement">Nécessite un Remplacement</label>
        <input type="checkbox" class="form-control" asp-for="MaintenanceDiagnosis.RequiresReplacement" />
    </div>
    <button type="submit" class="btn btn-primary">Créer un Diagnostic</button>
</form>

<!-- List of maintenance diagnoses -->
<h3>Liste des Diagnostics</h3>
<table class="table">
    <thead>
        <tr>
            <th>ID</th>
            <th>ID du Ticket</th>
            <th>Date du Diagnostic</th>
            <th>Description du Problème</th>
            <th>Fréquence</th>
            <th>Type de Problème</th>
            <th>Nécessite un Remplacement</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var diagnosis in Model.MaintenanceDiagnoses)
        {
            <tr>
                <td>@diagnosis.Id</td>
                <td>@diagnosis.MaintenanceTicketId</td>
                <td>@diagnosis.DiagnosisDate.ToShortDateString()</td>
                <td>@diagnosis.ProblemDescription</td>
                <td>@diagnosis.Frequency</td>
                <td>@diagnosis.IssueType</td>
                <td>@(diagnosis.RequiresReplacement ? "Oui" : "Non")</td>
                <td>
                    <form method="post" asp-page-handler="Update" asp-route-id="@diagnosis.Id">
                        <button type="submit" class="btn btn-warning">Modifier</button>
                    </form>
                    <form method="post" asp-page-handler="Delete" asp-route-id="@diagnosis.Id">
                        <button type="submit" class="btn btn-danger">Supprimer</button>
                    </form>
                </td>
            </tr>
        }
    </tbody>
</table>